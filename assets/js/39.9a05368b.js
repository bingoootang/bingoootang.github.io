(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{277:function(a,s,t){"use strict";t.r(s);var n=t(4),e=Object(n.a)({},function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"react-native-常见开发问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#react-native-常见开发问题","aria-hidden":"true"}},[a._v("#")]),a._v(" React Native 常见开发问题")]),a._v(" "),t("p",[a._v("在 React Native 开发过程中，经常会碰到一些重复的问题，但是由于间隔时间比较久，往往忘记了解决方法，造成重复工作。在这些问题中，有些工程问题可能随着 "),t("a",{attrs:{href:"https://www.npmjs.com/package/react-native-cli",target:"_blank",rel:"noopener noreferrer"}},[a._v("react-native-cli"),t("OutboundLink")],1),a._v(" 脚手架的升级而得到解决，有些特性或者功能问题可能需要社区支持，有些可能是使用方法不对等。"),t("br"),a._v("\n本文主要针对这些常见问题做一些整理和记录，方便后续查看。")]),a._v(" "),t("h2",{attrs:{id:"工程问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#工程问题","aria-hidden":"true"}},[a._v("#")]),a._v(" 工程问题")]),a._v(" "),t("h3",{attrs:{id:"js-远程调试打不开"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#js-远程调试打不开","aria-hidden":"true"}},[a._v("#")]),a._v(" js 远程调试打不开")]),a._v(" "),t("p",[a._v("android 默认情况下远程调试js启动的服务以 ip:port/debugger-ui 的链接打开，某些情况下会有网络问题导致打不开，在模拟器中打开调试工具，设置调试服务为 localhost:port 即可。")]),a._v(" "),t("h3",{attrs:{id:"在devtools-中查看网络请求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在devtools-中查看网络请求","aria-hidden":"true"}},[a._v("#")]),a._v(" 在devtools 中查看网络请求")]),a._v(" "),t("ul",[t("li",[a._v("安装 react-native-debugger")])]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("brew update "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" brew cask "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" react-native-debugger\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("ul",[t("li",[a._v("在应用入口处添加如下代码")])]),a._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[a._v("declare "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" global"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" any"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("__DEV__"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  global"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("XMLHttpRequest "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" global"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("originalXMLHttpRequest "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" global"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("XMLHttpRequest"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n  global"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("FormData "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" global"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("originalFormData "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" global"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("FormData"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n  global"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("Blob "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" global"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("originalBlob "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" global"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("Blob"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n  global"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("FileReader "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" global"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("originalFileReader "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" global"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("FileReader"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n  \n  fetch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// Ensure to get the lazy property")]),a._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// RNDebugger only")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("window "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("as")]),a._v(" any"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("__FETCH_SUPPORT__"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("window "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("as")]),a._v(" any"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("__FETCH_SUPPORT__"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("blob "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br")])]),t("h3",{attrs:{id:"构建成功，但是在模拟器中无法显示页面"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#构建成功，但是在模拟器中无法显示页面","aria-hidden":"true"}},[a._v("#")]),a._v(" 构建成功，但是在模拟器中无法显示页面")]),a._v(" "),t("p",[a._v("模拟器中显示如下错误信息，")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("unable to load script from assets index.android.bundle\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("解决方法：")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" android/app/src/main\nreact-native bundle --platform android --dev "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),a._v(" --entry-file index.js --bundle-output android/app/src/main/index.android.bundle --assets-dest android/app/src/main/res\nreact-native run-android\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("h2",{attrs:{id:"功能问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#功能问题","aria-hidden":"true"}},[a._v("#")]),a._v(" 功能问题")]),a._v(" "),t("h3",{attrs:{id:"使用视频"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用视频","aria-hidden":"true"}},[a._v("#")]),a._v(" 使用视频")]),a._v(" "),t("p",[a._v("可以引入 react-native-video 这个包，安装完成后，需要执行 "),t("code",[a._v("react-native link react-native-video")]),a._v(" 链接相关库。如果报一些包找不到的错，且路径都是 maven 库的话，可以在 android/build.grade 中加入如下设置。")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("maven {\n    url 'https://maven.google.com'\n}\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("p",[a._v("配置完成后如下：")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("allprojects {\n    repositories {\n        mavenLocal()\n        jcenter()\n        maven {\n            url 'https://maven.google.com'\n        }\n        maven {\n            // All of React Native (JS, Obj-C sources, Android binaries) is installed from npm\n            url \"$rootDir/../node_modules/react-native/android\"\n        }\n    }\n}\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br")])]),t("h3",{attrs:{id:"安卓端动图支持"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安卓端动图支持","aria-hidden":"true"}},[a._v("#")]),a._v(" 安卓端动图支持")]),a._v(" "),t("p",[a._v("react-native在安卓端默认是不支持GIF动图的，根据文档提示，需要在android/app/build.gradle文件中根据需要手动添加以下模块")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("dependencies {\n  // If your app supports Android versions before Ice Cream Sandwich (API level 14)\n  compile 'com.facebook.fresco:animated-base-support:1.9.0'\n\n  // For animated GIF support\n  compile 'com.facebook.fresco:animated-gif:1.9.0'\n\n  // For WebP support, including animated WebP\n  compile 'com.facebook.fresco:animated-webp:1.9.0'\n  compile 'com.facebook.fresco:webpsupport:1.9.0'\n\n  // For WebP support, without animations\n  compile 'com.facebook.fresco:webpsupport:1.9.0'\n}\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br")])]),t("p",[a._v("注意，不同的RN版本，需要的 "),t("code",[a._v("com.facebook.fresco")]),a._v(" 的版本号是不一样的。请查看对应 RN 版本的文档，获取正确的 "),t("code",[a._v("com.facebook.fresco")]),a._v(" 的版本号。")]),a._v(" "),t("h2",{attrs:{id:"其他问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#其他问题","aria-hidden":"true"}},[a._v("#")]),a._v(" 其他问题")]),a._v(" "),t("h3",{attrs:{id:"statusbar-高度"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#statusbar-高度","aria-hidden":"true"}},[a._v("#")]),a._v(" StatusBar 高度")]),a._v(" "),t("p",[a._v("StatusBar 不会占据位置，只能改变系统状态栏的颜色等属性，需要在样式中空出状态栏的高度，否则系统状态栏会覆盖在页面上造成遮挡。"),t("br"),a._v("\n获取状态栏的高度方法：")]),a._v(" "),t("ul",[t("li",[a._v("安卓： StatusBar.currentHeight")]),a._v(" "),t("li",[a._v("IOS：iphoneX 为 44，其他为 20")])])])},[],!1,null,null,null);s.default=e.exports}}]);