(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{275:function(t,a,s){"use strict";s.r(a);var n=s(4),e=Object(n.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"android-应用基础知识"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#android-应用基础知识","aria-hidden":"true"}},[t._v("#")]),t._v(" Android 应用基础知识")]),t._v(" "),s("blockquote",[s("p",[t._v("在 React Native 过程中，发现有很多问题并不能通过 RN 很好的解决，通常需要借助原生能力，因此有必要进行一些原生开发的学习。")])]),t._v(" "),s("p",[t._v("通常我们在安装 Android 应用的时候都会有一个 APK 文件，这个 APK 文件包含了 Android 应用的所有内容 -- 代码，数据和资源文件。在被安装到 Android 系统后，系统会给每个 Android 应用设置一个安全沙箱。这个安全沙箱有如下特点：")]),t._v(" "),s("ul",[s("li",[t._v("Android 系统是一种多用户 Linux 系统，其中的每个应用都是一个不同的用户。")]),t._v(" "),s("li",[t._v("默认情况下，系统会为每个应用分配一个唯一的 Linux 用户 ID。系统为应用中的所有文件设置权限，使得只有分配给该应用的用户 ID 才能访问这些文件，也就是说只有应用本身才能访问应用文件。")]),t._v(" "),s("li",[t._v("每个进程都具有自己的虚拟机 (VM)，因此应用代码是在与其他应用隔离的环境中运行。")]),t._v(" "),s("li",[t._v("默认情况下，每个应用都在其自己的 Linux 进程内运行。Android 会在需要执行任何应用组件时启动该进程，然后在不再需要该进程或系统必须为其他应用恢复内存时关闭该进程。")])]),t._v(" "),s("p",[t._v("通过安全沙箱，Android 系统可以保证最小权限原则。也就是说，默认情况下，每个应用都只能访问执行其工作所需的组件，而不能访问其他组件。这样便营造出一个非常安全的环境，在这个环境中，应用无法访问系统中其未获得权限的部分。")]),t._v(" "),s("p",[t._v("Android 应用提供多个入口点，每个应用都是将各种可单独调用的不同组件加以组合开发而成。")]),t._v(" "),s("h2",{attrs:{id:"应用组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#应用组件","aria-hidden":"true"}},[t._v("#")]),t._v(" 应用组件")]),t._v(" "),s("p",[t._v("应用组件是 Android 应用的基本构建基块。每个组件都是一个不同的点，系统可以通过它进入您的应用。 并非所有组件都是用户的实际入口点，有些组件相互依赖，但每个组件都以独立实体形式存在，并发挥特定作用。")]),t._v(" "),s("p",[t._v("Android 共有四种不同的应用组件类型，每种类型都服务于不同的目的，并且具有定义组件的创建和销毁方式的不同生命周期。")]),t._v(" "),s("h3",{attrs:{id:"activity"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#activity","aria-hidden":"true"}},[t._v("#")]),t._v(" Activity")]),t._v(" "),s("p",[t._v("Activity 表示具有用户界面的单一屏幕。例如，电子邮件应用可能具有一个显示新电子邮件列表的 Activity、一个用于撰写电子邮件的 Activity 以及一个用于阅读电子邮件的 Activity。 在这些 Activity 中，每一个 Activity 都独立于其他 Activity 而存在。 因此，其他应用可以启动其中任何一个 Activity。")]),t._v(" "),s("h3",{attrs:{id:"服务（service）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#服务（service）","aria-hidden":"true"}},[t._v("#")]),t._v(" 服务（Service）")]),t._v(" "),s("p",[t._v("服务是一种在后台运行的组件，用于执行长时间运行的操作或为远程进程执行作业。服务不提供用户界面。例如，当用户位于其他应用中时，服务可能在后台播放音乐或者通过网络获取数据，但不会阻断用户与 Activity 的交互。")]),t._v(" "),s("h3",{attrs:{id:"内容提供程序（content-provider）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#内容提供程序（content-provider）","aria-hidden":"true"}},[t._v("#")]),t._v(" 内容提供程序（Content Provider）")]),t._v(" "),s("p",[t._v("内容提供程序管理一组共享的应用数据。您可以将数据存储在文件系统、SQLite 数据库、网络上或您的应用可以访问的任何其他永久性存储位置。其他应用可以通过内容提供程序查询数据，甚至修改数据（如果内容提供程序允许）。例如，Android 系统可提供管理用户联系人信息的内容提供程序。")]),t._v(" "),s("h3",{attrs:{id:"广播接收器（broadcast-receiver）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#广播接收器（broadcast-receiver）","aria-hidden":"true"}},[t._v("#")]),t._v(" 广播接收器（Broadcast Receiver）")]),t._v(" "),s("p",[t._v("广播接收器是一种用于响应系统范围广播通知的组件。许多广播都是由系统发起的。例如，通知屏幕已关闭、电池电量不足或已拍摄照片的广播。应用也可以发起广播，例如，通知其他应用某些数据已下载至设备，并且可供其使用。尽管广播接收器不会显示用户界面，但它们可以创建状态栏通知，在发生广播事件时提醒用户。但广播接收器更常见的用途只是作为通向其他组件的“通道”，设计用于执行极少量的工作。例如，它可能会基于事件发起一项服务来执行某项工作。")]),t._v(" "),s("p",[t._v("在 Android 系统中，任何应用都可以启动其他应用的组件。当系统启动某个组件时，会启动该应用的进程（如果尚未运行），并实例化该组件所需的类。因此，与大多数其他系统上的应用不同，Android 应用并没有单一入口点（例如，没有 main() 函数）。")]),t._v(" "),s("p",[t._v("前面说到，应用以最小权限在安全沙箱中运行，应用无法直接启动其他应用中的组件，因此需要借助于启动组件（Intent）告知系统想启动的组件，系统随后便会为应用启动该组件。")]),t._v(" "),s("h2",{attrs:{id:"启动组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动组件","aria-hidden":"true"}},[t._v("#")]),t._v(" 启动组件")]),t._v(" "),s("p",[t._v("在应用组件中，有三种组件：Activity、服务和广播接收器可以通过名为 Intent 的异步消息进行启动。Intent 是指在相互独立的组件（如两个 Activity）之间提供运行时绑定功能的对象，表示一个应用“执行某项操作的意向”。")]),t._v(" "),s("p",[t._v("每种类型的组件有不同的启动方法，但是均需要将 Intent 对象作为参数传递给对应的启动方法，比如 Activity 需要通过 "),s("code",[t._v("startActivity(Intent intent)")]),t._v(" 来启动，Service 需要通过 "),s("code",[t._v("startService(Intent intent)")]),t._v(" 来启动。")]),t._v(" "),s("p",[t._v("当然，应用组件并不是可以被任何一种 Intent 启动，应用组件通常会在配置文件中声明 Intent 过滤器来过滤出满足要求的启动请求。")]),t._v(" "),s("h2",{attrs:{id:"清单文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#清单文件","aria-hidden":"true"}},[t._v("#")]),t._v(" 清单文件")]),t._v(" "),s("p",[t._v("在 Android 系统启动应用组件之前，系统必须通过读取应用的 AndroidManifest.xml 文件（“清单”文件）确认组件存在。 应用必须在此文件中声明其所有组件，并且该文件必须位于应用项目目录的根目录中。")]),t._v(" "),s("p",[t._v("除了声明组件以外，清单文件还可以声明应用需要的用户权限，应用使用的 API ，应用所使用的软硬件功能等。")]),t._v(" "),s("div",{staticClass:"language-xml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token prolog"}},[t._v('<?xml version="1.0" encoding="utf-8"?>')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("manifest")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("...")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("application")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("icon")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("@drawable/app_icon.png"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("...")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("activity")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("com.example.project.ExampleActivity"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n                  "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("label")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("@string/example_label"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("...")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("intent-filter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("action")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("android.intent.action.SEND"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n                      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("data")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("*/*"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n                      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("category")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("android.intent.category.DEFAULT"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n                  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("intent-filter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("activity")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        ...\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("application")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("manifest")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br")])]),s("p",[t._v("比如，上面的清单文件中声明了一个类名为 "),s("code",[t._v("com.example.project.ExampleActivity")]),t._v(" 的 Activity，该 Activity 具有响应 'send' Intent 的能力。如果另一个应用创建了一个包含 ACTION_SEND 操作的 Intent，系统可能会启动该 Activity 来完成进一步的处理。")]),t._v(" "),s("h2",{attrs:{id:"应用资源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#应用资源","aria-hidden":"true"}},[t._v("#")]),t._v(" 应用资源")]),t._v(" "),s("p",[t._v("除了源代码以外，Android 应用还包含很多与代码分离的资源，如图像、音频文件等。对于项目中包括的每一项资源，SDK 构建工具会定义一个唯一的整型 ID，开发者可以利用它来引用资源。Android 支持许多不同的备用资源限定符。限定符是一种加入到资源目录名称中，用来定义这些资源适用的设备配置的简短字符串。 提供与源代码分离的资源的一个最重要优点在于，您可以提供针对不同设备配置的备用资源。例如，通过在 XML 中定义 UI 字符串，您可以将字符串翻译为其他语言，并将这些字符串保存在单独的文件中。然后，Android 系统会根据向资源目录名称追加的语言限定符（如为法语字符串值追加 res/values-fr/）和用户的语言设置，对页面应用相应的语言字符串。")])])},[],!1,null,null,null);a.default=e.exports}}]);